{"version":3,"sources":["components/Tooltip.js","components/MapTest.js","components/Results.js","components/Sidebar.js","components/LoadingAnimation.js","components/Declaration.js","App.js","serviceWorker.js","index.js"],"names":["styles","makeStyles","geoTooltip","fontFamily","display","flexDirection","transition","width","wordBreak","whiteSpace","tooltipName","fontSize","fontWeight","tooltipPolls","color","paddingBottom","tooltipWinner","backgroundColor","props","padding","Tooltip","classes","className","results","name","pollsReported","pollsTotal","votes","style","id","partyCode","winner","runnerup","toLocaleString","e","getWinningBy","console","log","getWinner","mapContainer","flex","resetButton","boxShadow","height","alignItems","justifyContent","borderRadius","background","cursor","defaultStyle","weight","fillOpacity","selectedStyle","MapTest","useState","initBounds","setInitBounds","currentBounds","setCurrentBounds","geo","setgeo","mapRef","useRef","geoRef","useEffect","current","axios","get","province","then","res","status","data","bounds","L","geoJSON","getBounds","leafletElement","fitBounds","catch","err","selectedRiding","zoomToED","resetBounds","eachLayer","layer","getTooltipData","feature","getPartyResults","EDName","find","ed","toUpperCase","getFillByResults","parties","length","fill","party","nameShort","ridingName","map","findLayer","properties","Name","handleSelectRiding","options","pane","removeFrom","isMobile","some","toMatchItem","navigator","userAgent","match","small","window","screen","featureData","featureColor","_tooltip","_content","includes","newTooltip","ReactDOMServer","renderToString","setTooltipContent","sticky","direction","bindTooltip","offset","Map","ref","zoomSnap","zoomDelta","minZoom","TileLayer","attribution","url","GeoJSON","partyResults","fillColor","onClick","layerBounds","closeTooltip","clickedRiding","setStyle","onEachFeature","onMouseOver","onMouseOut","position","resultsRoot","candidateRoot","resultsInfo","imageDiv","screensize","marginBottom","minWidth","overflow","bottom","textAlign","candidateLeftDiv","candidateName","candidateRightDiv","justifySelf","votesDiv","Candidate","candidate","prevCandidate","setCandidate","imgRef","setTimeout","split","pop","alt","onLoad","target","onError","src","prov","cachedHeadFilename","firstName","lastName","isIncumbent","percent","isElected","paddingRight","Results","i","partyColor","findParty","getPartyColor","key","sidebar","title","top","minHeight","paddingLeft","content","overflowX","overflowY","LocationButton","Sidebar","arrow","toggleArrow","menu","setMenu","setResults","nodeRef","onMouseEnter","resultId","onMouseLeave","onTouchMove","onTouchEnd","resultData","children","CSSTransition","in","timeout","unmountOnExit","classNames","sort","a","b","result","LoadingAnimation","useStyles","root","alignSelf","Declaration","declarationText","app","left","App","setData","loading","toggleLoading","setParties","selectedResults","setSelectedResults","timer","innerWidth","setDeclarationText","declaration","setDeclaration","declaredColor","setDeclaredColor","setProv","replace","RegExp","exec","location","search","decodeURIComponent","getQueryString","getData","startTimer","getResultsFromURL","setInterval","updateResults","overallResult","partyName","resultText","text","partyWinner","hash","decodeURI","riding","toLowerCase","initResults","newResults","Boolean","hostname","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.6ec49dd1.chunk.js","sourcesContent":["import React, {useEffect} from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core'\r\n\r\nconst styles = makeStyles({\r\n    geoTooltip: {\r\n        fontFamily: 'Roboto, Ubuntu, Helvetica',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        transition: '1s', \r\n        width: 200,\r\n        wordBreak: 'break-word',\r\n        whiteSpace: 'pre-wrap',\r\n    },\r\n    tooltipName: {\r\n        fontSize: 20,\r\n        fontWeight: 'bolder',\r\n        \r\n    },\r\n    tooltipPolls: {\r\n        fontSize: 14,\r\n        color: 'grey',\r\n        paddingBottom: 10\r\n    },\r\n    tooltipWinner:{\r\n        backgroundColor: props=>props.color,\r\n        color: props=>props.color === '#C0C0C0'? 'black' : 'white',\r\n        padding: 5, \r\n        '& #tooltipPartyCode': {\r\n            fontSize: 18\r\n        },\r\n        '& #tooltipWinnerName': {\r\n            fontSize: 20,\r\n            fontWeight: 'bolder',\r\n            // whiteSpace: 'pre-wrap',\r\n\r\n        },\r\n        '& #tooltipWinningBy' : {\r\n\r\n        }\r\n    }\r\n})\r\n\r\n\r\nconst Tooltip = (props) => {\r\n\r\n    const classes = styles(props)\r\n\r\n    const getWinningBy = () => {\r\n        try {\r\n            let winner = props.results.results[0]\r\n            let runnerup = props.results.results[1]\r\n            if (winner.votes > runnerup.votes) {\r\n                return `Leading by ${(winner.votes - runnerup.votes).toLocaleString('en')} votes`\r\n            }\r\n        } catch (e) {\r\n            // return ''\r\n        }\r\n    }\r\n\r\n    const getWinner = () => {\r\n        try {\r\n            if (props.results.results[0].votes > 0) {\r\n            return ( <div className={classes.tooltipWinner} style={{backgroundColor: props.color}}>\r\n                <div id=\"tooltipPartycode\">{props.results.results[0].partyCode}</div>\r\n                <div id=\"tooltipWinnerName\">{props.results.results[0].name}</div>\r\n                <div id=\"tooltipWinningBy\">{getWinningBy()}</div>\r\n            </div>)\r\n            }\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.geoTooltip}>\r\n            <div className={classes.tooltipName}>{props.results.name}</div>\r\n            <div className={classes.tooltipPolls}>{props.results.pollsReported}/{props.results.pollsTotal} polls reported</div>\r\n            {props.results.pollsReported > 0 &&\r\n                getWinner()\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Tooltip","import React, { useState, useEffect, useRef } from 'react'\r\nimport ReactDOMServer from 'react-dom/server'\r\nimport { Map, TileLayer, GeoJSON } from 'react-leaflet'\r\nimport Control from 'react-leaflet-control'\r\nimport L from 'leaflet'\r\n\r\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap';\r\n\r\nimport {makeStyles} from '@material-ui/core'\r\n\r\nimport Tooltip from './Tooltip'\r\nimport axios from 'axios'\r\n\r\nconst styles= makeStyles({\r\n    mapContainer: {\r\n        flex:1\r\n    },\r\n    resetButton: {\r\n        display: 'flex',\r\n        boxShadow: '0 1px 4px rgba(0,0,0,0.65)',\r\n        height: 26,\r\n        width: 26,\r\n        fontSize: 14,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        borderRadius: '4px',\r\n        background: '#FFFFFF',\r\n        cursor: 'pointer',\r\n        color: 'black'\r\n        \r\n    }\r\n})\r\n\r\nconst defaultStyle={\r\n    weight: 0.9,\r\n    // color: 'black',\r\n    fillOpacity: 0.9\r\n}\r\n\r\nconst selectedStyle={\r\n    weight: 3,\r\n    fillOpacity: 1\r\n}\r\n\r\n\r\n const MapTest = (props) => {\r\n    // const [position, setPosition] = useState({lat: 54, lng: -105, zoom: 5});\r\n    const [initBounds, setInitBounds] = useState();\r\n    const [currentBounds, setCurrentBounds] = useState();\r\n    const [geo, setgeo] = useState(null);\r\n    // const [selectedRiding, setSelectedRiding] = useState(null)\r\n    const mapRef = useRef(null);\r\n    const geoRef = useRef(null)\r\n\r\n    const classes = styles();\r\n\r\n    useEffect(()=> {\r\n        console.log('render map')\r\n        if(!mapRef.current) {\r\n            console.log('no mapReff')\r\n            return\r\n        } else {\r\n            axios.get(`/${props.province}/geojson`)\r\n                .then(res=>{\r\n                    if (res.status === 200) {\r\n                        setgeo(res.data)\r\n                        var bounds = L.geoJSON(res.data).getBounds()\r\n                        setInitBounds(bounds)\r\n                        var map = mapRef.current.leafletElement\r\n                        map.fitBounds(bounds)\r\n                    }\r\n                })\r\n                .catch(err=>{\r\n                    console.log(err);\r\n                    console.log('error getting geojson data')\r\n                })\r\n        }   \r\n    }, [])\r\n\r\n    useEffect(()=> {\r\n        if (props.selectedRiding) {\r\n            zoomToED(props.selectedRiding.name)\r\n            \r\n        } else {\r\n            resetBounds()\r\n\r\n        }\r\n        \r\n    }, [props.selectedRiding, geoRef.current])\r\n\r\n    useEffect(()=> {\r\n        if (geoRef.current) {\r\n            geoRef.current.leafletElement.eachLayer(layer=>{\r\n                getTooltipData(layer.feature, layer)\r\n            });\r\n        }\r\n    }, [props.data])\r\n\r\n    const getPartyResults = (EDName) => {\r\n        try {\r\n            if (props.data) {\r\n                let partyResults = props.data.data.find(ed=>\r\n                    ed.name.toUpperCase() === EDName.toUpperCase()\r\n                )\r\n                return partyResults\r\n            }\r\n        } catch (e) {\r\n            console.log(\"Couldn't get party results\")\r\n        }\r\n    }\r\n    \r\n    const getFillByResults = (results) =>{\r\n        try {\r\n            if(props.parties && results.results.length > 0) {\r\n                if (results.results[0].votes > 0) {\r\n                if (results.results[0].partyCode === 'NDP') {\r\n                    return 'rgb(221, 102, 0)'\r\n                } else if (results.results[0].partyCode === 'PC') {\r\n                    return 'rgb(0, 51, 153)'\r\n                }\r\n\r\n                let fill = props.parties.find(party=>{\r\n                    return party.nameShort === results.results[0].partyCode\r\n                })\r\n                if (fill) {\r\n                    return fill.color\r\n                } else {\r\n                    return 'rgb(192, 192, 192)'\r\n                }\r\n            } else {\r\n                return 'rgb(89, 91, 91)'\r\n            }\r\n        }\r\n        } catch(err) {\r\n            console.log(\"Error getting Geo Fill for \", results.name)\r\n            return 'rgb(89, 91, 91)'\r\n        } \r\n    }\r\n\r\n\r\n    const handleFill = (feature) => {\r\n        if (feature) {\r\n            let partyResults = getPartyResults(feature.properties.Name);\r\n            let fill = 'rgb(89, 91, 91)'\r\n            if (partyResults) {\r\n                fill = getFillByResults(partyResults)\r\n                if (props.selectedRiding) {\r\n                    if (props.selectedRiding.name.toUpperCase() === feature.properties.Name.toUpperCase()) {\r\n                        return {\r\n                            fillColor: fill,\r\n                            weight: 3,\r\n                            color: 'black',\r\n                            fillOpacity: 1\r\n                        }\r\n                    }\r\n                } \r\n                return {\r\n                    fillColor: fill,\r\n                    weight: 0.9,\r\n                    color: 'black',\r\n                    fillOpacity: 0.9\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleClick = (e) => {\r\n        try {\r\n            var layerBounds = e.layer.getBounds();\r\n            if (currentBounds === layerBounds) {\r\n                e.layer.closeTooltip();\r\n            } \r\n            const map = mapRef.current.leafletElement;\r\n            setCurrentBounds(layerBounds)\r\n            map.fitBounds(layerBounds)\r\n            const clickedRiding = e.layer.feature.properties.Name\r\n            const partyResults = getPartyResults(clickedRiding)\r\n            props.handleSelectRiding(partyResults)\r\n            // setSelectedRiding(e.layer.feature.properties.Name)\r\n            e.layer.setStyle(selectedStyle)\r\n        } catch(e) {\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    const zoomToED = (ridingName) => {\r\n        try {\r\n\r\n            if (geoRef.current) {\r\n\r\n                const map = mapRef.current.leafletElement;\r\n                const geo = geoRef.current.leafletElement;\r\n                var findLayer = null;\r\n                geo.eachLayer(layer=>{\r\n                    if (layer.feature.properties.Name.toUpperCase() === ridingName.toUpperCase()) {\r\n                        findLayer = layer\r\n                    }\r\n                })\r\n                map.fitBounds(findLayer.getBounds())\r\n            }    \r\n        } catch (err) {\r\n            console.log('error zooming on riding')\r\n        }\r\n    }\r\n\r\n    const resetBounds = () => {\r\n        try {\r\n            const map = mapRef.current.leafletElement;\r\n            props.handleSelectRiding(null)\r\n            map.fitBounds(initBounds)    \r\n            map.eachLayer(function(layer) {\r\n                if(layer.options.pane === \"tooltipPane\") layer.removeFrom(map);\r\n            });\r\n        } catch (err) {\r\n\r\n        }\r\n    }\r\n\r\n    function highlightFeature(e) {\r\n        e.layer.setStyle(selectedStyle)\r\n    }\r\n\r\n    function resetFeature(e) {\r\n        if (props.selectedRiding) {\r\n            let layerName = e.layer.feature.properties.Name\r\n            if (layerName.toUpperCase() !== props.selectedRiding.name.toUpperCase()) {\r\n                e.layer.setStyle(defaultStyle)\r\n            } \r\n        } else {\r\n            e.layer.setStyle(defaultStyle)\r\n        }\r\n    }\r\n    function detectMob() {\r\n        const toMatch = [\r\n            /Android/i,\r\n            /webOS/i,\r\n            /iPhone/i,\r\n            /iPad/i,\r\n            /iPod/i,\r\n            /BlackBerry/i,\r\n            /Windows Phone/i\r\n        ];\r\n    \r\n        return toMatch.some((toMatchItem) => {\r\n            return navigator.userAgent.match(toMatchItem);\r\n        });\r\n    }\r\n    const getTooltipData = (feature, layer) => {\r\n        console.log('toolgtip')\r\n        if (feature.properties ) {\r\n            try {\r\n                const isMobile = detectMob()\r\n                const small = window.screen.width < 500\r\n                const featureData = getPartyResults(feature.properties.Name)\r\n                const featureColor = getFillByResults(featureData)\r\n                if (featureData && featureColor) {\r\n                    if (!layer._tooltip) {\r\n                        layer.bindTooltip(\r\n                            ReactDOMServer.renderToString(<Tooltip small={small} results={featureData} color={featureColor} />), \r\n                            {sticky: !isMobile, offset: isMobile ? [0, 50] : [0,0], direction: isMobile ? 'top': 'auto'})\r\n                    } else if (!layer._tooltip._content.includes(featureColor)) {\r\n                        let newTooltip = ReactDOMServer.renderToString(<Tooltip small={small} results={featureData} color={featureColor} />)\r\n                        layer.setTooltipContent(newTooltip, {sticky: false, direction: 'top'})\r\n                    }\r\n                }\r\n            } catch(e) {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.mapContainer}>\r\n            <Map \r\n                ref={mapRef} \r\n                zoomSnap={0.25}\r\n                zoomDelta={0.5}\r\n                minZoom={3}    \r\n            >\r\n                <TileLayer\r\n                attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                url=\"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png\"\r\n                />\r\n\r\n                {geo && \r\n                <GeoJSON \r\n                    ref={geoRef} \r\n                    style={handleFill} \r\n                    data={geo} \r\n                    onClick={handleClick} \r\n                    onEachFeature={getTooltipData}\r\n                    onMouseOver={highlightFeature}\r\n                    onMouseOut={resetFeature}\r\n                />  \r\n                }   \r\n                <Control position=\"topleft\">\r\n                    <a id=\"zoomOut\" style={{color: 'black !important'}} className={`leaflet-control-zoom leaflet-bar ${classes.resetButton}`} onClick={resetBounds}>\r\n                        <ZoomOutMapIcon />\r\n                    </a>\r\n                </Control>\r\n            </Map>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default MapTest;","import React, {useEffect, useRef, useState} from 'react';\r\nimport {makeStyles} from '@material-ui/core'\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\n\r\nconst styles = makeStyles(props=>({\r\n    resultsRoot: {\r\n        padding: 10,\r\n      \r\n    },\r\n    candidateRoot: {\r\n        position: 'relative',\r\n        display: 'flex', \r\n        flexDirection: 'row',\r\n        height: 120,\r\n        padding: '10px 0'\r\n    },\r\n    resultsInfo: {\r\n        display: 'flex', \r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        '& #pollsReported': {\r\n            fontSize: 12,\r\n            fontWeight: 'bolder'\r\n        },\r\n        '& #totalVotes': {\r\n            fontSize: 10,\r\n            color: 'darkslategrey'\r\n        }\r\n    },\r\n    imageDiv: {\r\n        height: props=>props.screensize < 700 ? 100 : 120,\r\n        position: 'relative',\r\n        marginBottom: 25,\r\n        minWidth: 50,\r\n        width: props=>props.screensize < 700 ? 50 : 70,\r\n        borderRadius: '8px',\r\n        overflow: 'hidden',\r\n        '& #partyCode': {\r\n            position: 'absolute', \r\n            bottom: 8,\r\n            color: 'white',\r\n            width: '100%',\r\n            textAlign: 'center'\r\n        },\r\n        '& img': {\r\n            width: '100%',\r\n            transition: 'width 500ms'\r\n        }\r\n    },\r\n    candidateLeftDiv: {\r\n        flex: 3, \r\n        display: 'flex', \r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        padding: '10px 0 10px 10px',\r\n\r\n        '& #candidateIncumbent': {\r\n            fontSize: 13,\r\n            fontWeight: 'lighter'\r\n        }\r\n    },\r\n    candidateName: {\r\n        '& #candidateFirst': {\r\n            fontWeight: 'bolder',\r\n            fontSize: props=>props.screensize < 700 ? 12 : 14,\r\n\r\n        },\r\n        '& #candidateLast': {\r\n            fontWeight: 'bolder',\r\n            fontSize: props=>props.screensize < 700 ? 16 : 22,\r\n        }\r\n    }, \r\n    candidateRightDiv: {\r\n        flex: 2, \r\n        justifySelf: 'flex-end',\r\n        display: 'flex', \r\n        flexDirection: 'column',\r\n        padding: '10px 0',\r\n        justifyContent: 'space-between',\r\n        '& #candidateElected': {\r\n            display: 'flex', \r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end',\r\n            fontSize: props=>props.screensize < 700 ? 12 : 14,\r\n        }\r\n    },\r\n    votesDiv: {\r\n        textAlign: 'right',\r\n        '& #votesPercent': {\r\n            fontSize: props=>props.screensize < 700 ? 16 : 22,\r\n            fontWeight: 'bolder'\r\n        },\r\n        '& #votesTotal': {\r\n            fontSize: props=>props.screensize < 700 ? 12 : 14,\r\n            fontWeight: 'lighter'\r\n        }\r\n    }\r\n}))\r\n\r\nconst Candidate = (props) => {\r\n    const {candidate} = props\r\n    const [prevCandidate, setCandidate] = useState('')\r\n    const imgRef = useRef(null)\r\n\r\n    useEffect(()=> {\r\n        setCandidate(candidate.name)\r\n        try {\r\n\r\n            if (prevCandidate === imgRef.current.name) {\r\n                imgRef.current.style.width = '100%'\r\n            } else {\r\n                imgRef.current.style.width = 0\r\n                setTimeout(()=>{\r\n                    imgRef.current.style.width = '100%'\r\n                }, 1000)\r\n\r\n            }\r\n        } catch (e) {\r\n            console.log('error resetting candidate image')\r\n        }\r\n\r\n    }, [candidate])\r\n    \r\n    const classes = styles(props);\r\n    var candidateName = candidate.name.split(' ')\r\n    var lastName = candidateName.pop();\r\n    \r\n    return (\r\n        <div className={classes.candidateRoot}>\r\n            <div style={{backgroundColor: props.color}} className={classes.imageDiv}>\r\n                <img ref={imgRef} alt=\"Candidate Headshot\" name={candidate.name} onLoad={e=>e.target.style.width = \"100%\"} onError={(e) => { e.target.onError = null; e.target.src =`/img/no_headshot.png`}} src={`/image/${props.prov}/${candidate.cachedHeadFilename}`}/>\r\n                <div id=\"partyCode\" style={{fontWeight: 'bolder',color: props.color === '#C0C0C0' ? 'black' : 'white' }}>{candidate.partyCode}</div>\r\n            </div>\r\n            <div className={classes.candidateLeftDiv}>\r\n                <div className={classes.candidateName}>\r\n                    <div id=\"candidateFirst\">{candidate.firstName}</div>\r\n                    <div id=\"candidateLast\" >{candidate.lastName}</div>\r\n                </div>\r\n                <div id=\"candidateIncumbent\">{candidate.isIncumbent && 'Incumbent'}</div>\r\n            </div>\r\n            <div className={classes.candidateRightDiv}>\r\n                <div className={classes.votesDiv}>\r\n                    <div id='votesPercent'>{candidate.percent}%</div>\r\n                    <div id='votesTotal'>{candidate.votes.toLocaleString('en')} total votes</div>\r\n                </div>\r\n                {candidate.isElected ? <div id=\"candidateElected\">\r\n                    <CheckCircleIcon style={{paddingRight: 5, fontSize: 14, color: 'green'}} /> Elected\r\n                </div>\r\n                :\r\n                <div style={{fontSize: 14}}/>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst Results = (props) => {\r\n    \r\n    const classes = styles();\r\n    const {data} = props;\r\n\r\n    const getPartyColor = (candidate) => {\r\n        let color = '#C0C0C0' \r\n        if (candidate.partyCode === \"NDP\") {\r\n            return 'rgb(221, 102, 0)'\r\n        }  else if (candidate.partyCode === 'PC') {\r\n            return 'rgb(0, 51, 153)'\r\n        }\r\n        if (props.parties) {\r\n            let findParty = props.parties.find(party=>party.nameShort === candidate.partyCode)\r\n            if (findParty) {\r\n                color = findParty.color\r\n            }\r\n        }\r\n        return color\r\n\r\n    }\r\n\r\n    return (\r\n        <div className={classes.resultsRoot}>\r\n            {props.data && \r\n        <>\r\n            <div className={classes.resultsInfo}>\r\n                <div id=\"pollsReported\">{data.pollsReported}/{data.pollsTotal} polls reported</div>\r\n                <div id=\"totalVotes\">{data.votes.toLocaleString('en')} total votes</div>\r\n            </div>\r\n                <div>\r\n                    {props.data.results.map((candidate, i)=> {\r\n                        let partyColor = getPartyColor(candidate);\r\n                        return <Candidate prov={props.prov} screensize={props.screensize} key={i} color={partyColor} candidate={candidate}/>\r\n                    })}\r\n                </div>    \r\n            </>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Results","import React, {useState, useEffect, useRef} from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\n\r\nimport {CSSTransition} from 'react-transition-group'\r\n\r\nimport Results from './Results'\r\n\r\nconst styles = makeStyles({\r\n    sidebar: {\r\n        flex: 2, \r\n        minWidth: 260,\r\n        position: 'relative',\r\n        display: 'flex',\r\n        overflow: 'hidden'\r\n    },\r\n    title: {\r\n        width: '100%',\r\n        top: 0,\r\n        backgroundColor: 'darkgrey',\r\n        color: 'white',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        minHeight: 50,\r\n        paddingLeft: 10,\r\n        fontWeight: 'bolder',\r\n    },\r\n    content: {\r\n        marginBottom: 10,\r\n        height: 'calc(100% - 50px)',\r\n        overflowX: 'hidden',\r\n        overflowY: 'scroll'\r\n\r\n    },\r\n    LocationButton: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        minHeight: 50,\r\n        paddingLeft: 10,\r\n        justifyContent: 'space-between',\r\n        '&:hover': {\r\n            backgroundColor: 'lightgrey',\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n})\r\n\r\nconst Sidebar = (props) =>  {\r\n    const [arrow, toggleArrow] = useState(0)\r\n    const classes=styles();\r\n    const [menu, setMenu] = useState('location')\r\n    const [results, setResults] = useState(null)\r\n    const nodeRef = useRef(null)\r\n\r\n\r\n    useEffect(()=>{\r\n        if (props.results) {\r\n            setResults(props.results)\r\n            setMenu('results')\r\n        } else {\r\n            setResults(null)\r\n            setMenu('location')\r\n            toggleArrow(0)\r\n        }\r\n        \r\n    },[props.results, props.data])\r\n\r\n\r\n    const handleSelectRiding = (results) => {\r\n        props.handleSelectRiding(results);\r\n        setResults(results); \r\n        setMenu('results')\r\n    }   \r\n\r\n    const LocationButton = (props) => {\r\n        return (\r\n            <div\r\n                className={`${classes.LocationButton} menu-item`}\r\n                onMouseEnter={()=>toggleArrow(props.resultId)}\r\n                onMouseLeave={()=>toggleArrow(0)}\r\n                onTouchMove={e=>toggleArrow(props.resultId)}\r\n                onTouchEnd={e=>handleSelectRiding(props.resultData)}\r\n                onClick={()=>handleSelectRiding(props.resultData)}\r\n            >\r\n                {props.children}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const handleBack = () => {\r\n        setMenu('location')\r\n        props.handleSelectRiding(null)\r\n    }\r\n\r\n\r\n    return (\r\n        <div id=\"widgetSidebar\" className={classes.sidebar}>\r\n            <div style={{position: 'absolute', top: 0, height: '50px', width: '100%', backgroundColor: 'darkgrey'}}/>\r\n            <CSSTransition \r\n                in={menu===\"location\"} \r\n                timeout={500}\r\n                unmountOnExit\r\n                nodeRef={nodeRef}\r\n                classNames=\"menu-primary\"\r\n            >\r\n                <div className=\"menu\">\r\n                    <div className={classes.title}>\r\n                        SELECT A RIDING\r\n                    </div>\r\n                    <div className={classes.content}>\r\n                    {\r\n                        props.data && props.data.data.sort((a,b)=>{\r\n                            if (a.name > b.name) {\r\n                                return 1\r\n                            } else return -1\r\n                        })\r\n                        .map((result)=> {\r\n                            return (\r\n                                <LocationButton key={result.id} resultId={result.id} resultData={result} >{result.name}{arrow === result.id && <ChevronRightIcon/>}</LocationButton>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n                </div>\r\n            </CSSTransition>\r\n            <CSSTransition \r\n                in={menu===\"results\"} \r\n                unmountOnExit\r\n                timeout={500}\r\n                nodeRef={nodeRef}\r\n                classNames=\"menu-secondary\"\r\n            >\r\n                <div className=\"menu\">\r\n                    <div className={classes.title}>\r\n                        <ChevronLeftIcon onClick={handleBack} style={{cursor: 'pointer'}}/><div style={{paddingRight: '15px'}}>{results && results.name.toUpperCase()}</div>\r\n                    </div>\r\n                    <div className={classes.content}>\r\n                        {props.data && menu === 'results' && \r\n                            <Results \r\n                                prov={props.prov}\r\n                                screensize={props.small}\r\n                                data={results}\r\n                                parties={props.parties}\r\n                            />\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </CSSTransition>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar","import React from 'react'\r\n\r\nconst LoadingAnimation = () => {\r\n    return (\r\n        <div className=\"spinnerDiv\">\r\n            <div className=\"spinnerText\">Loading Map..</div>\r\n            <div className=\"spinner\">\r\n                <div className=\"double-bounce1\"></div>\r\n                <div className=\"double-bounce2\"></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default LoadingAnimation","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core'\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        backgroundColor: props=>props.color,\r\n        color: 'white', \r\n        fontSize: 18,\r\n        fontWeight: 'bold',\r\n        padding: 5,\r\n        justifyContent: \"center\",\r\n        display: 'flex', \r\n        alignSelf: 'center',\r\n        width: '100%',\r\n        '& svg': {\r\n            paddingRight: 5\r\n        }\r\n    }\r\n})\r\n\r\nconst Declaration = (props) => {\r\n    const classes = useStyles(props)\r\n    return <div className={classes.root}>\r\n        <CheckCircleIcon />\r\n        {props.declarationText}\r\n    </div>\r\n}\r\n\r\nexport default Declaration\r\n\r\n","import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {makeStyles} from '@material-ui/core'\nimport axios from 'axios'\n\n\n// import { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\n\nimport MapDiv from './components/MapTest'\nimport Sidebar from './components/Sidebar.js'\nimport LoadingAnimation from './components/LoadingAnimation'\nimport Declaration from './components/Declaration'\n\nconst styles = makeStyles({\n  app: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    \n  }, \n  left: {\n    flex: 4,\n    position: 'relative',\n    display: 'flex',\n    flexDirection: \"column\"\n  }\n})\n\nfunction App() {\n\n  const [data, setData] = useState(null)\n  const [loading, toggleLoading] = useState(true)\n  const [parties, setParties] = useState(null)\n  const [selectedResults, setSelectedResults] = useState(null)\n  const [timer, setTimer] = useState(30000)\n  const [screensize, setScreenSize] = useState(window.innerWidth)\n  const [declarationText, setDeclarationText] = useState('')\n\tconst [declaration, setDeclaration] = useState(null)\n  const [declaredColor, setDeclaredColor] = useState('')\n  const [prov, setProv] = useState('')\n\n  const classes = styles();\n\n\n  function getQueryString(name) {\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n        results = regex.exec(window.location.search);\n    return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n\n  useEffect(()=>{\n    let province = 'nb'\n\n    var url = getQueryString('prov')\n    if (url) {\n      province = url\n    }\n    setProv(province)\n\n    if (province) {\n      getData(province)\n      startTimer(province)\n    }\n    console.log(`Updating every ${timer/1000} seconds`)\n\n  },[])\n\n  useEffect(()=> {\n    getResultsFromURL()\n  }, [loading])\n\n  const startTimer = (province) => {\n      let id = setInterval(()=>{\n          getData(province);\n      }, timer);\n    }\n\n  useEffect(()=> {\n    updateResults()\n    \n  }, [data])\n\n  useEffect(()=>{\n\t\ttry {\n\t\t\tif (data && declaration) {\n\t\t\t\tif (declaration.overallResult.partyName && declaration.overallResult.resultText) {\n\t\t\t\t\tlet text = declaration.overallResult.partyName + ' ' + declaration.overallResult.resultText;\n          setDeclarationText(text)\n          let partyWinner = parties.find(party=>party.name === declaration.overallResult.partyName)\n          setDeclaredColor(partyWinner.color)     \n\t\t\t\t} else \n        setDeclarationText('')\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t\n\t\t}\n\n    },[data, parties, declaration])\n\n  const getData = (province) => {\n    console.log('fetching data')\n    axios.get(`/${province}/fullresults`)\n      .then(res=>{\n        if (res.status === 200) {\n          setData(res.data);\n          toggleLoading(false);\n        }\n      })\n      .catch(err=>console.log(\"Error fetching FULLELECTIONDATA, check your env variables and try again\", err))\n    \n    axios.get(`/${province}/overallresults`)\n      .then(res=>{\n        if (res.status === 200) {\n          setParties(res.data.partyResults)\n        }\n      })\n      .catch(err=>console.log(\"Error fetching OVERALLRESULTS, check your env variables and try again\"))\n    axios.get(`/${province}/declaration`)\n      .then(function (res) {\n        if (res.status === 200) {\n          setDeclaration(res.data)\n        } \n      })\n      .catch(err=>{\n        console.log(\"Error fetching results\")\n      })\n  }\n\n  const getResultsFromURL = () => {\n    try {\n      let hash = window.location.hash\n      if (hash) {\n        hash = decodeURI(hash.replace('#', ''))\n        let name = hash\n        if (data) {\n          const result = data.data.find(riding=>{\n            return riding.name.toLowerCase() === name.toLowerCase() \n          })\n          if (result) {\n            setSelectedResults(result)\n          }\n        }\n      }\n  \n    } catch (err) {\n      console.log('could not find riding by hash')\n    }\n\n  }\n\n  const updateResults = () => {\n    if (selectedResults) {\n      let initResults = selectedResults.name;\n      let newResults = data.data.find(riding=> riding.name === initResults)\n      if (initResults === newResults.name) {\n        setSelectedResults(newResults)\n      }\n    }\n  }\n\n  const handleSelectRiding = (results) => {\n    setSelectedResults(results)\n  }\n\n\n  return (\n    <div id={'map-widget-app'} className={classes.app}>\n      <div className={classes.left}>\n        {declarationText && <Declaration color={declaredColor} declarationText={declarationText}/>}\n      {!loading  ? <MapDiv \n        data={data}\n        parties={parties}\n        province={prov}\n        handleSelectRiding={handleSelectRiding}\n        selectedRiding={selectedResults}\n        />\n        :\n        <LoadingAnimation/>\n      }\n      </div>\n        <Sidebar \n          data={data} \n          parties={parties}\n          results={selectedResults} \n          handleSelectRiding={handleSelectRiding}\n          small={screensize}\n          prov={prov}\n          />\n        {/* {!loading && <Pictureloader data={data}/>} */}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}