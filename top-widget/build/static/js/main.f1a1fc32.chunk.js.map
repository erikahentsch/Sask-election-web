{"version":3,"sources":["components/Seat.js","components/Party.js","components/MajorityMeter.js","components/Declaration.js","App.js","index.js"],"names":["styles","makeStyles","seat","height","props","small","minWidth","margin","backgroundColor","color","flexShrink","fontSize","Seat","classes","key","party","el","className","partyContainer","width","paddingTop","display","alignItems","fontWeight","letterSpacing","padding","borderRadius","justifyItems","justifyContent","popVote","Party","name","seats","votes","useStyles","meter","marginLeft","position","bar","background","majorityLine","bottom","borderLeft","majorityLabel","textAlign","marginTop","Bar","other","MajorityMeter","useState","maxSeats","setMaxSeats","majorityPosition","setMajorityPosition","useEffect","data","leadingParty","partyResults","console","log","majority","map","i","style","left","root","alignSelf","paddingRight","Declaration","declarationText","main","flexDirection","titleRow","title","majorityMeter","seatMap","maxHeight","flexWrap","partyMap","update","App","setData","setTitle","timer","seatTotal","setSeatTotal","setMajority","setDeclarationText","declaration","setDeclaration","province","url","replace","results","RegExp","exec","window","location","search","decodeURIComponent","getQueryString","axios","get","then","res","status","catch","err","startTimer","getData","overallResult","partyName","resultText","text","e","setInterval","split","find","includes","parties","date","j","push","nameShort","id","votesPercent","length","seatsRemaining","k","Date","generated","majorityPercent","toString","screenSize","innerWidth","ReactDOM","render","undefined","document","getElementById"],"mappings":"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","file":"static/js/main.f1a1fc32.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\n\r\nconst styles = makeStyles({\r\n    seat: {\r\n        height: (props)=>props.small ? 10: 15, \r\n        minWidth: '4%',\r\n        margin: '0.1%',\r\n        backgroundColor:  (props)=>props.color,\r\n        flexShrink: 1,\r\n        fontSize: 16\r\n    }\r\n})\r\n\r\nconst Seat = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return <div key={`${props.party}-${props.el}`} className={classes.seat}/>\r\n}\r\n\r\nexport default Seat;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    partyContainer: {\r\n        width: '20%',\r\n        paddingTop: 5\r\n    },\r\n    party: props=> ({\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 'bold',\r\n        fontSize: 14,\r\n        letterSpacing: 2,\r\n        padding: '5px 5px',\r\n        margin: 1,\r\n        borderRadius: 5,\r\n        color: 'white',\r\n        justifyItems: 'center',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: props.color \r\n    }),\r\n    popVote: props=>({\r\n        padding: 5,\r\n        fontWeight: 'bold',\r\n        fontSize: 14\r\n    })\r\n})\r\n\r\nconst Party = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return (\r\n        <div className={classes.partyContainer}>\r\n            <div className={classes.party}>\r\n                <div>{props.name}</div>\r\n                <div>{props.seats}</div>\r\n            </div>\r\n            <div className={classes.popVote}>\r\n                {props.small === 'true' ?` ${props.votes}%` : `Pop vote: ${props.votes}%` }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Party;","import React, {useState, useEffect} from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles({\r\n    meter: props =>({\r\n        width: 120,\r\n        marginLeft: 10,\r\n        position: 'relative'\r\n    }),\r\n    bar: {\r\n      background: (props) =>\r\n        props.color, \r\n      width: (props) => props.votes,\r\n      borderRadius: '0px 5px 5px 0px',\r\n      height: 5,\r\n      margin: 1,\r\n    },\r\n    majorityLine: {\r\n        position: 'absolute',\r\n        height: '120%',\r\n        bottom: -2,\r\n        borderLeft: (props)=> props.small ? '1px solid black' : '2px solid black',\r\n    },\r\n    majorityLabel: props=>({\r\n        position: 'absolute',\r\n        // right: '50%',\r\n        textAlign: 'center',\r\n        marginTop: props.small ? -14 : -18,\r\n        marginLeft: props.small ?  -3 : -4,\r\n        fontSize: 12,\r\n        fontWeight: 'bolder'\r\n    })\r\n\r\n\r\n  });\r\n  \r\n\r\nfunction Bar(props) {\r\n    const { color, votes, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.bar} {...other} />;\r\n}\r\n\r\nfunction Line(props) {\r\n    const { color, majority, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.majorityLine} {...other} />;\r\n}\r\n\r\nconst MajorityMeter = (props) => {\r\n    \r\n    // const { color, ...other } = props;\r\n\r\n    const [maxSeats, setMaxSeats] = useState(25)\r\n    const [difference, setDifference] = useState(0);\r\n    const [majorityPosition, setMajorityPosition] = useState(50);\r\n    const [leading, setLeading] = useState(0)\r\n    const classes = useStyles(props)\r\n    \r\n    useEffect(()=> {\r\n        if (props.data) {\r\n            let leadingParty = props.data.partyResults[0];\r\n            console.log('leading', props.majority, leadingParty.seats)\r\n            if (leadingParty.seats >= props.majority) {\r\n                setMaxSeats(leadingParty.seats);\r\n                setMajorityPosition(props.majority/leadingParty.seats*100)\r\n            } else {\r\n                setMaxSeats(props.majority)\r\n                setMajorityPosition(props.majority/props.majority*100)\r\n            }\r\n        }\r\n    }, [props.data])\r\n\r\n    return (\r\n        <div className={classes.meter}>\r\n            {/* <div className={classes.majorityLabel} style={{right: `${100-majorityPosition}%`}}>{props.majority} seats needed for majority</div> */}\r\n            {props.data && props.data.partyResults.map((party, i)=>{\r\n                console.log('max seats', maxSeats)\r\n                if (i < 4) {\r\n                    return <Bar color={party.color} votes={`${(party.seats/maxSeats)*100}%`} />\r\n                } \r\n            })    \r\n            }\r\n            {/* {console.log('majority',majority)} */}\r\n            <div className={classes.majorityLine} style={{left: `${majorityPosition}%`}}/>\r\n\r\n        </div>\r\n    );\r\n}\r\nexport default MajorityMeter;","import React, {useEffect, useState} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\n\r\nconst useStyles=makeStyles({\r\n    root: {\r\n        display: 'flex', \r\n        alignItems: 'center',\r\n        // paddingBottom: 15,\r\n        fontWeight: \"bolder\", \r\n        alignSelf: 'flex-start',\r\n        fontSize: 14,\r\n        padding: 5,\r\n        '& svg': {\r\n            color: 'green',\r\n            fontSize: 20, \r\n            paddingRight: 5\r\n        }\r\n\r\n    }\r\n})\r\n\r\nconst Declaration = (props) => {\r\n    const classes = useStyles()\r\n    \r\n\r\n    return (\r\n        <div className={props.declarationText && classes.root}>\r\n            <CheckCircleIcon color=\"green\" />\r\n            {props.declarationText}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Declaration","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport axios from 'axios'\r\n\r\n//Components\r\nimport Seat from './components/Seat'\r\nimport Party from './components/Party'\r\nimport MajorityMeter from './components/MajorityMeter'\r\nimport Declaration from './components/Declaration'\r\n\r\nconst styles = makeStyles({\r\n\tmain: {\r\n\t\t// fontFamily: 'Roboto',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\tflexDirection: 'column',\r\n\t\tpadding: '10px 10px',\r\n\t\tbackgroundColor: '#ededf0'\r\n\t},\r\n\ttitleRow: {\r\n\t\tdisplay: 'flex', \r\n\t\tpadding: '0px 5px',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\ttitle: props=> ({\r\n\t\tfontSize: props.small ? 18  : 24,\r\n\t\tfontWeight: 'bold',\r\n\t\tpaddingRight: 20\r\n\t}),\r\n\tmajorityMeter: props => ({\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\ttextAlign: 'right',\r\n\t\tfontSize: 12,\r\n\t}),\r\n\tseatMap: {\r\n\t\tdisplay: 'flex',\r\n\t\theight: 90,\r\n\t\tmaxHeight: props=>props.small ? 50 : 100,\r\n\t\tflexDirection: 'column-reverse',\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n\tpartyMap: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-start'\r\n\t},\r\n\tupdate: props=>({\r\n\t\tfontSize: 11\r\n\t})\r\n})\r\n\r\nconst App = (props) => {\r\n\r\n\tconst classes = styles(props);\r\n\r\n\tconst [data, setData] = useState(null)\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [timer, setTimer] = useState(30000)\r\n\tconst [seatTotal, setSeatTotal] = useState(49)\r\n\tconst [majority, setMajority] = useState(25)\r\n\tconst [declarationText, setDeclarationText] = useState('')\r\n\tconst [declaration, setDeclaration] = useState(null)\r\n\t\r\n\r\n \t// const small = windo w.screen.width < 500\r\n\r\n\tfunction getQueryString(name) {\r\n\t\tname = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n\t\tvar regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\r\n\t\t\tresults = regex.exec(window.location.search);\r\n\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tconsole.log(`Updating every ${timer/1000} seconds`)\r\n\t\tlet province = 'nb'\r\n\t\tvar url = getQueryString('prov')\r\n\t\tconsole.log('url', url)\r\n\t\tif (url) {\r\n\t\t\tprovince = url\r\n\t\t}\r\n\r\n\t\taxios.get(`/${province}/config`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tsetTitle(res.data.title)\r\n\t\t\t\t\tsetMajority(res.data.majority)\r\n\t\t\t\t\tsetSeatTotal(res.data.seats)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err=>console.log(\"error setting title\"))\r\n\t\tstartTimer();\r\n\t\tgetData();\r\n\t\t\r\n\t},[])\r\n\r\n\tuseEffect(()=>{\r\n\t\tconsole.log('check declaration', data, declaration)\r\n\t\ttry {\r\n\t\t\tif (data && declaration) {\r\n\t\t\t\tif (declaration.overallResult.partyName && declaration.overallResult.resultText) {\r\n\t\t\t\t\tlet text = declaration.overallResult.partyName + ' ' + declaration.overallResult.resultText;\r\n\t\t\t\t\tconsole.log(text)\r\n\r\n\t\t\t\t\tsetDeclarationText(text)\r\n\t\t\t\t} else \r\n\t\t\t\tsetDeclarationText('')\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t\r\n\t\t}\r\n\r\n    },[data,declaration])\r\n\r\n\tconst startTimer = () => {\r\n\t\tsetInterval(()=>{\r\n\t\t\tgetData();\r\n\t\t}, timer);\r\n\t  }\r\n\t\r\n\r\n\tconst getData = () => {\r\n\t\tlet province = 'nb'\r\n\t\ttry {\r\n\t\t\tprovince = window.location.search.split('/').find(el=>el.includes('?prov=')).split('=')[1];\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('default province')\r\n\t\t}\r\n\t\taxios.get(`/${province}/overallresults`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tsetData(res.data)\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t\t.catch(err=>console.log(\"Error fetching overall results\"))\r\n\t\taxios.get(`/${province}/declaration`)\r\n\t\t.then(function (res) {\r\n\t\t\tconsole.log(res.data)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetDeclaration(res.data)\r\n\t\t\t} \r\n\t\t})\r\n\t\t.catch(err=>{\r\n\t\t\tconsole.log(\"Error fetching results\")\r\n\t\t})\r\n\t\t\r\n\t}\r\n\r\n\tconst seats = [];\r\n\r\n\tconst parties = [];\r\n\r\n\tvar date = ''\r\n\r\n\tif (data) {\r\n\t\tdata.partyResults.map(party=>{\r\n\t\t\tfor (let j=0; j < party.seats; j ++) {\r\n\t\t\t\tseats.push(<Seat key={`${party.nameShort}-${j}`} color={party.color} small={props.small} />)\r\n\t\t\t}\r\n\t\t\t// if (party.seats> 0) {\r\n\t\t\t\tparties.push(<Party key={party.id} name={party.nameShort} seats={party.seats} votes={party.votesPercent} color={party.color} small={props.small} />)\r\n\t\t\t// }\r\n\t\t})\r\n\t\tif (seats.length < seatTotal+1) {\r\n\t\t\tconsole.log(seats.length)\r\n\t\t\tlet seatsRemaining = seatTotal-seats.length\r\n\t\t\tfor (let k=0; k < seatsRemaining; k++) {\r\n\t\t\t\tseats.push(<Seat small={props.small} key={`none-${k}`} color={'#cccccc'}/>)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdate = new Date(data.generated)\r\n\r\n\t} else {\r\n\t\tfor (let i = 0; i < seatTotal; i++) {\r\n\t\t\tseats.push(<Seat key={`none-${i}`} small={props.small} color={'#cccccc'} />)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className={classes.main}>\r\n\t\t\t<div className={classes.titleRow}>\r\n\t\t\t\t<div className={classes.title}>{title}</div>\r\n\t\t\t\t{(data) && <div className={classes.majorityMeter}>{majority} seats needed for majority \r\n\t\t\t\t\t<MajorityMeter seatTotal={seatTotal} majority={25} majorityPercent={(25/seatTotal)*100} data={data}/>\r\n\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\t\t\t{declarationText && \r\n\t\t\t\t<Declaration declarationText={declarationText} />\r\n\t\t\t}\r\n\t\t\t<div className={classes.seatMap}>\r\n\t\t\t\t{seats}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.partyMap}>\r\n\t\t\t\t{parties}\r\n\t\t\t</div>\r\n\t\t\t{/* <div className={classes.declaration}>Declaration</div> */}\r\n\t\t\t{data && <div className={classes.update}>Last updated: {date && date.toString()}</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App.js\";\r\n\r\nlet screenSize= window.innerWidth < 500\r\nReactDOM.render(<App small={screenSize ? 'true' : undefined}/>, document.getElementById(\"root\"));"],"sourceRoot":""}